<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ball Bird Game</title>
</head>
<body>

    <div>
        <canvas id="gameCanvas" width="800" height="600"></canvas>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');

            // Player properties
            const player = {
                x: canvas.width / 2,
                y: canvas.height - 50,
                radius: 25,
                color: '#BFFF33',
                speed: 5,
                velocity: { x: 0, y: 0 },
                gravity: 0.5,
                jumpPower: -10,
                isGrounded: false,
            };
            
            // Function to darken a hex color by a percentage
            const darkenColor = (hex, percent) => {
                let r = parseInt(hex.slice(1, 3), 16);
                let g = parseInt(hex.slice(3, 5), 16);
                let b = parseInt(hex.slice(5, 7), 16);

                r = Math.floor(r * (1 - percent / 100));
                g = Math.floor(g * (1 - percent / 100));
                b = Math.floor(b * (1 - percent / 100));

                const toHex = (c) => ('0' + c.toString(16)).slice(-2);
                return `#${toHex(r)}${toHex(g)}${toHex(b)}`;
            };

            const drawPlayer = () => {
                const beakColor = darkenColor(player.color, 60);
                
                // Draw the main body (circle)
                ctx.beginPath();
                ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);
                ctx.fillStyle = player.color;
                ctx.fill();
                ctx.closePath();
                
                // Draw the beak (upside-down triangle)
                ctx.beginPath();
                ctx.moveTo(player.x - 10, player.y - 6);
                ctx.lineTo(player.x + 10, player.y - 6);
                ctx.lineTo(player.x, player.y + 4);
                ctx.fillStyle = beakColor;
                ctx.fill();
                ctx.closePath();
            };

            // Keyboard input
            const keys = {
                a: false,
                d: false,
                space: false
            };

            document.addEventListener('keydown', (e) => {
                if (e.key === 'a' || e.key === 'A') {
                    keys.a = true;
                }
                if (e.key === 'd' || e.key === 'D') {
                    keys.d = true;
                }
                if (e.key === ' ') {
                    keys.space = true;
                }
            });

            document.addEventListener('keyup', (e) => {
                if (e.key === 'a' || e.key === 'A') {
                    keys.a = false;
                }
                if (e.key === 'd' || e.key === 'D') {
                    keys.d = false;
                }
                if (e.key === ' ') {
                    keys.space = false;
                }
            });

            // Update game state
            const update = () => {
                // Apply gravity
                player.velocity.y += player.gravity;

                // Move left and right
                if (keys.a) {
                    player.velocity.x = -player.speed;
                } else if (keys.d) {
                    player.velocity.x = player.speed;
                } else {
                    player.velocity.x *= 0.95;
                    if (Math.abs(player.velocity.x) < 0.1) {
                        player.velocity.x = 0;
                    }
                }

                // Jump
                if (keys.space && player.isGrounded) {
                    player.velocity.y = player.jumpPower;
                    player.isGrounded = false;
                }

                // Update position
                player.x += player.velocity.x;
                player.y += player.velocity.y;

                // Handle collisions with canvas boundaries
                if (player.x - player.radius < 0) {
                    player.x = player.radius;
                    player.velocity.x = 0;
                } else if (player.x + player.radius > canvas.width) {
                    player.x = canvas.width - player.radius;
                    player.velocity.x = 0;
                }

                // Ground collision
                if (player.y + player.radius > canvas.height - 20) {
                    player.y = canvas.height - 20 - player.radius;
                    player.velocity.y = 0;
                    player.isGrounded = true;
                }
            };

            // Main game loop
            const gameLoop = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Draw ground
                ctx.fillStyle = '#22c55e';
                ctx.fillRect(0, canvas.height - 20, canvas.width, 20);

                update();
                drawPlayer();

                requestAnimationFrame(gameLoop);
            };

            // Start the game loop
            gameLoop();
        });
    </script>
</body>
</html>
