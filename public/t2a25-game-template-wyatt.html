<h1>t2a25-game-template-wyatt.html</h1>

<script>

// global variables here

let myGlobalX = 0
let myClock
let myScore = 10
let lastDirection = "right"
let bulletActive = false
let bulletTimer = null

function myHitOther(my1,my2){
   let A = document.getElementById(my1).getBoundingClientRect()
   let B = document.getElementById(my2).getBoundingClientRect()

   return !(
      A.right < B.left ||
      A.left > B.right ||
      A.bottom < B.top ||
      A.top > B.bottom
   )
}

function resetBullet(){
   clearInterval(bulletTimer)
   document.getElementById('myBullet').style.left = "-200px"
   document.getElementById('myBullet').style.top  = "-200px"
   document.getElementById('myBullet').style.display = "none"
   bulletActive = false
}

function checkExitDoor(){
   if (myHitOther('myImg01','myImg04')){
      document.all.myText01.value = "You reached the exit!"
      alert("You Win!")
      location = "https://www.google.ca"
   }
}

function fireBullet(){

   if (bulletActive) return
   bulletActive = true

   let b = document.getElementById('myBullet')
   let g = document.getElementById('myImg01')

   let gx = parseInt(g.style.left)
   let gy = parseInt(g.style.top)

   // start bullet at center of player
   b.style.left = gx + 45 + "px"
   b.style.top  = gy + 35 + "px"
   b.style.display = "block"

   clearInterval(bulletTimer)

   bulletTimer = setInterval(function(){

      let bx = parseInt(b.style.left)
      let by = parseInt(b.style.top)

      // move in last direction
      if (lastDirection == "right") bx += 10
      if (lastDirection == "left")  bx -= 10
      if (lastDirection == "up")    by -= 10
      if (lastDirection == "down")  by += 10

      b.style.left = bx + "px"
      b.style.top  = by + "px"

      // hit zombies?
      if (myHitOther('myBullet','myImg02')){
         document.all.myText01.value = "You shot Zombie 1!"
         resetBullet()
      }

      if (myHitOther('myBullet','myImg03')){
         document.all.myText01.value = "You shot Zombie 2!"
         resetBullet()
      }

      // off screen?
      if (bx < -20 || bx > 2000 || by < -20 || by > 2000){
         resetBullet()
      }

   }, 20)

}

</script>




<body id="myBody" style="background-repeat:repeat; background-size: 80%" background="myBackground01.jpg"

onkeydown="{

   document.all.myText01.value = event.key

   if (event.key == 'd') { 
     lastDirection = 'right'
     document.getElementById('myImg01').style.left =
         parseInt(document.getElementById('myImg01').style.left) + 10 + 'px'
   }   

   if (event.key == 'a') { 
     lastDirection = 'left'
     document.getElementById('myImg01').style.left =
         parseInt(document.getElementById('myImg01').style.left) - 10 + 'px'
   }   

   if (event.key == 's') {  
     lastDirection = 'down'
     document.getElementById('myImg01').style.top =
         parseInt(document.getElementById('myImg01').style.top) + 10 + 'px'
   }  

   if (event.key == 'w') {  
     lastDirection = 'up'
     document.getElementById('myImg01').style.top =
         parseInt(document.getElementById('myImg01').style.top) - 10 + 'px'
   }  

   checkExitDoor()

}">
<br>

<input id="myText01" type=text value="" size=50 placeholder="Feedback here"><br>

<input type=button value="Auto Background Left" onclick="{
  clearInterval(myClock)
  let myTemp = '100px 0px'
  myClock = setInterval(function(){
      myGlobalX -= 5
      myTemp =  myGlobalX + 'px 0px'
      document.getElementById('myBody').style.backgroundPosition = myTemp
  }, 100)
}">


<input type=button value="Right" onclick="{
   lastDirection = 'right'
   document.getElementById('myImg01').style.left =
       parseInt(document.getElementById('myImg01').style.left) + 10 + 'px'
   checkExitDoor()
}">

<input type=button value="Down" onclick="{
   lastDirection = 'down'
   document.getElementById('myImg01').style.top =
       parseInt(document.getElementById('myImg01').style.top) + 10 + 'px'
   checkExitDoor()
}">

<input type=button value="shoot" onclick="{
   fireBullet()
}"><br><br>

<img id="myImg01" src="olddudewitgun.gif"
     style="position:absolute; width:100px; height:80px; left:10px; top:190px;">

<img id="myImg02" src="Zombie1.gif"
     style="position:absolute; width:100px; height:80px; left:350px; top:190px;">

<img id="myImg03" src="Zombie2.gif"
     style="position:absolute; width:100px; height:80px; left:500px; top:190px;">

<img id="myImg04" src="Exitdoor.gif"
     style="position:absolute; width:100px; height:80px; left:500px; top:400px;">

<div id="myBullet"
style="position:absolute; width:12px; height:12px; background:yellow;
       left:-200px; top:-200px; display:none; z-index:9999;">
</div>

</body>
