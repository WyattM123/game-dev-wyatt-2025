<h1>t2a25-game-template-wyatt.html</h1>

<script>

// =======================
// GLOBAL VARIABLES
// =======================
let myGlobalX = 0
let myClock
let myScore = 10
let myGun01
let myGun02
let myShooting = 1


// =======================
// COLLISION DETECTION
// =======================
function myHitOther(my1, my2){
   let left1   = parseInt(document.getElementById(my1).style.left)
   let right1  = left1 + parseInt(document.getElementById(my1).style.width)
   let top1    = parseInt(document.getElementById(my1).style.top)   
   let bottom1 = top1   + parseInt(document.getElementById(my1).style.height)

   let left2   = parseInt(document.getElementById(my2).style.left)
   let right2  = left2 + parseInt(document.getElementById(my2).style.width)
   let top2    = parseInt(document.getElementById(my2).style.top)   
   let bottom2 = top2   + parseInt(document.getElementById(my2).style.height)

   if ( (right1 >= left2) &&
        (bottom1 >= top2) &&
        (left1 <= right2) &&
        (top1 <= bottom2) ){
       return true
   }
}


// =======================
// CHECK ALL COLLISIONS
// =======================
function myCheckHit(){
   document.all.myText01.value = myScore

   if (myHitOther('myImg01','myImg02')){
      document.getElementById('myImg01').style.left = '20px'
      myScore -= 1
   }

   if (myHitOther('myImg01','myImg03')){
      document.getElementById('myImg01').style.left = '20px'
      myScore -= 1
   }

   if (myHitOther('myBullet01','myImg03')){
      clearInterval(myGun01)
      document.getElementById('myBullet01').style.left = '-200px'
      myScore += 1
   }

   if (myHitOther('myBullet02','myImg03')){
      clearInterval(myGun02)
      document.getElementById('myBullet02').style.left = '-200px'
      myScore += 1
   }


   if (myScore <= 0){
      alert("Sorry you lose")
      location.reload()
   }

   if (myHitOther('myImg01','myImg04')){
      alert("YOU WIN! Next level!")
      location = "https://www.google.ca"
   }
}


// =======================
// PLAYER MOVEMENT
// =======================
function moveUp(){
   let guy = document.getElementById('myImg01')
   guy.style.top = parseInt(guy.style.top) - 10 + 'px'
   myCheckHit()
}

function moveDown(){
   let guy = document.getElementById('myImg01')
   guy.style.top = parseInt(guy.style.top) + 10 + 'px'
   myCheckHit()
}

function moveLeft(){
   let guy = document.getElementById('myImg01')
   guy.style.left = parseInt(guy.style.left) - 10 + 'px'
   myCheckHit()
}

function moveRight(){
   let guy = document.getElementById('myImg01')
   guy.style.left = parseInt(guy.style.left) + 10 + 'px'
   myCheckHit()
}



// =======================
// SHOOTING SYSTEM (FULLY FIXED)
// =======================
function fireBullet(){

   if (myShooting > 2) { myShooting = 1 }

   let guy = document.getElementById('myImg01')
   let gx = parseInt(guy.style.left)
   let gy = parseInt(guy.style.top)

   // -------------------
   // BULLET 1
   // -------------------
   if (myShooting == 1){
      myShooting++

      let b = document.getElementById('myBullet01')

      b.style.left = (gx + 80) + 'px'
      b.style.top  = (gy + 30) + 'px'

      clearInterval(myGun01)
      myGun01 = setInterval(function(){
         let pos = parseInt(b.style.left)
         if (isNaN(pos)) pos = 0
         b.style.left = (pos + 10) + 'px'
         myCheckHit()
      }, 20)
   }


   // -------------------
   // BULLET 2
   // -------------------
   else if (myShooting == 2){
      myShooting++

      let b = document.getElementById('myBullet02')

      b.style.left = (gx + 80) + 'px'
      b.style.top  = (gy + 30) + 'px'

      clearInterval(myGun02)
      myGun02 = setInterval(function(){
         let pos = parseInt(b.style.left)
         if (isNaN(pos)) pos = 0
         b.style.left = (pos + 10) + 'px'
         myCheckHit()
      }, 20)
   }
}

</script>



<!-- =============================
     BODY + KEYBOARD MOVEMENT
============================= -->
<body id="myBody" style="background-repeat:repeat; background-size:80%" background="myBackground01.jpg"

onkeydown="{
   if (event.key=='w' || event.key=='W') moveUp()
   if (event.key=='s' || event.key=='S') moveDown()
   if (event.key=='a' || event.key=='A') moveLeft()
   if (event.key=='d' || event.key=='D') moveRight()
}">

<input id="myText01" type=text size=50 placeholder="Feedback here"><br><br>



<!-- =============================
     MOVEMENT BUTTONS
============================= -->
<button onclick="moveUp()">W</button><br>
<button onclick="moveLeft()">A</button>
<button onclick="moveDown()">S</button>
<button onclick="moveRight()">D</button><br><br>



<!-- =============================
     FIRE BUTTON
============================= -->
<button onclick="fireBullet()">SHOOT</button><br><br>



<!-- =============================
     IMAGES
============================= -->
<img id="myImg01" src="olddudewitgun.gif"
     style="position:absolute; width:100px; height:80px; left:10px; top:190px; z-index:20;">

<img id="myImg02" src="Zombie1.gif"
     style="position:absolute; width:100px; height:80px; left:350px; top:190px;">

<img id="myImg03" src="Zombie2.gif"
     style="position:absolute; width:100px; height:80px; left:500px; top:190px;">

<img id="myImg04" src="Exitdoor.gif"
     style="position:absolute; width:100px; height:80px; left:500px; top:400px;">


<!-- BULLETS (NOW VISIBLE) -->
<img id="myBullet01" src="Bullet1.gif"
     style="position:absolute; width:10px; height:10px; left:-200px; top:-200px; z-index:9999;">

<img id="myBullet02" src="Bullet1.gif"
     style="position:absolute; width:10px; height:10px; left:-200px; top:-200px; z-index:9999;">

</body>
