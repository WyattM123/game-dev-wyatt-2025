<h1 align="center">t2a22-json-wyatt.html</h1>

<script>
async function fetchData(url) {
  try {
    let fetchUrl = url;
    let isDuck = false;
    if (url.includes("random-d.uk")) {
      fetchUrl = "https://api.allorigins.win/get?url=" + encodeURIComponent(url);
      isDuck = true;
    }

    const response = await fetch(fetchUrl, { headers: { "Accept": "application/json" } });
    let data;
    if (isDuck) {
      const proxyData = await response.json();
      data = JSON.parse(proxyData.contents);
    } else {
      data = await response.json();
    }

    const myJson = JSON.stringify(data, null, 2);
    const container = document.getElementById('myDiv1');
    container.innerHTML = `<pre>${myJson}</pre>`;

    const imgSrc = data.image || data.url;
    if (imgSrc) {
      container.innerHTML += `<img src="${imgSrc}" alt="Random Image" style="max-width:100%;height:auto;">`;
    }

    let joke = data.joke || data.setup;
    if (data.setup && data.delivery) joke = `${data.setup} - ${data.delivery}`;
    if (joke) {
      container.innerHTML += `<p>${joke}</p>`;
    }

  } catch (err) {
    document.getElementById('myDiv1').innerHTML = `<p style="color:red">Error fetching data: ${err}</p>`;
  }
}
</script>


<select id="mySelect" size="1" onchange="fetchData(this.value)">
  <option></option>
  <option value="https://randomfox.ca/floof/">randomfox</option>
  <option value="https://random.dog/woof.json">randomDAWG</option>
  <option value="https://icanhazdadjoke.com/">Dad Joke</option>
  <option value="https://random-d.uk/api/random">randomDUCK</option>
  <option value="https://v2.jokeapi.dev/joke/Programming?type=single">Programming Joke</option>
</select>

<div id="myDiv1"></div>
